setTimeout(function(){!function(){var e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;window.requestAnimationFrame=e}();var e=document.getElementById("smoke"),t=e.getContext("2d"),i=!0,a=[],s=50,n=(new Date).getTime(),h=2e3,m=100;function o(){if(i)return l(),!1;var g=a.length;for(t.clearRect(0,0,e.width,e.height);g--;)if(a[g].y<0||a[g].lifeTime>h)a.splice(g,1);else{a[g].update(),t.save();var w=-a[g].size/2,d=-a[g].size/2;t.translate(a[g].x-w,a[g].y-d),t.rotate(a[g].angle/180*Math.PI),t.globalAlpha=a[g].alpha,t.drawImage(a[g].image,w,d,a[g].size,a[g].size),t.restore()}(new Date).getTime()>n+s&&(n=(new Date).getTime(),a.push(new r(m,emitterY))),requestAnimationFrame(o)}function r(e,t,i){this.image=smokeImage,this.angle=359*Math.random(),this.startAlpha=1,this.x=e,this.y=t,this.size=10,this.startSize=50+0*Math.random(),this.endSize=70+0*Math.random(),this.startLife=(new Date).getTime(),this.lifeTime=0,this.velY=-1,this.velX=3*Math.random()-2}function l(){i?setTimeout(l,100):o()}emitterY=100,smokeImage=new Image,r.prototype.update=function(){this.lifeTime=(new Date).getTime()-this.startLife,this.angle+=.5;var e=this.lifeTime/h*100;this.size=this.startSize+(this.endSize-this.startSize)*e*.1,this.alpha=this.startAlpha-.01*e,this.alpha=Math.max(this.alpha,0),this.x+=this.velX,this.y+=this.velY},smokeImage.src="./images/smoke.png",smokeImage.onload=function(){i=!1},setTimeout(function(){e.height=600,e.width=window.innerWidth,o()},100)},300);